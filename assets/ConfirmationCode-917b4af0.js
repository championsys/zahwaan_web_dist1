import{ah as T,s as n,u as $,f as V,g as O,X as R,o as x,y as h,r as f,a as B,c as N,b as t,x as p,t as l,d as s,e as S,w as D,l as r,ak as E,al as W,J as z,a2 as A}from"./index-e698aeb1.js";const H={class:"auth"},I={class:"auth-conent"},J={class:"auth-conent-tabs-title"},L={class:"auth-conent-tabs-items"},M={class:"auth-conent-tabs-items-link active"},X={class:"auth-conent-tabs-items-link-icon"},Z={class:"auth-conent-form-title"},j={class:"wameed-form-grid text-center",style:{"grid-template-columns":"auto"}},G={class:"wameed-form-counter-text"},K={class:"wameed-form-counter-current-data"},Q={class:"wameed-form-counter-current-data-text"},te={__name:"ConfirmationCode",setup(U){const c=T();n(!1),$();const u=V(),a=O(),d=n(180),m=n(!1),_=n(!0),g=n(6),o=n({token:null,otp:null}),v=e=>{o.value.otp=e},w=e=>{u.push({name:e,params:{lang:h.global.locale.value}})},k=(e=!0,i=0)=>{m.value=e,d.value=i},b=()=>{const e={id_type:"email",id_value:a.query.email};c.forgetPassword(e).then(i=>{d.value=180,m.value=!1})};R(()=>[c.getForgetPasswordToken],()=>{c.getForgetPasswordToken&&(o.value.token=c.getForgetPasswordToken)},{immediate:!0,deep:!0});const y=()=>{c.checkOtpFrogetPwd(o.value).then(e=>{u.push({name:"password-reset",params:{lang:h.global.locale.value,token:o.value.token},query:{email:a.query.email,otp:o.value.otp}})})};return x(()=>{a.params.token&&(o.value.token=a.params.token),(!a.query.email||!a.params)&&u.push({name:"forgot-password",params:{lang:h.global.locale.value}})}),(e,i)=>{const C=f("login-email-icon"),F=f("check-icon"),q=f("counter-edit-icon");return B(),N("main",H,[t("div",I,[t("div",{class:p(["auth-conent-tabs",_.value?"hide-tabs":""])},[t("h1",J,l(e.$t("login.login method")),1),t("ul",L,[t("li",M,[t("span",X,[s(C)]),S(" "+l(e.$t("login.E-mail"))+" ",1),s(F,{class:"auth-conent-tabs-items-link-check"})])])],2),t("div",{class:p(["auth-conent-form",_.value?"show-form":""])},[t("h1",Z,l(e.$t("common.Validation code")),1),s(r(A),{class:"wameed-form",onOnClick:y},{default:D(({invalid:P})=>[t("div",j,[t("div",null,[s(r(E),{class:"wameed-form-counter",end:d.value,onOnFinish:k},null,8,["end"]),t("p",G,l(e.$t("common.wameed-form-counter-text")),1),t("label",{class:p(["wameed-form-counter-resend",m.value?"":"disabled"]),onClick:b},l(e.$t("common.resend")),3),s(r(W),{onChange:v,fields:g.value,fieldWidth:50,fieldHeight:50,required:!0,rules:"required"},null,8,["fields"]),t("div",K,[t("p",Q,l(r(a).query.email),1),s(q,{onClick:i[0]||(i[0]=Y=>w("forgot-password")),class:"wameed-form-counter-current-data-btn"})])])]),s(r(z),{classes:"wameed-form-submit validation-code",title:e.$t("common.send"),disabled:P||!o.value.otp||o.value.otp.length!=g.value,type:"submit"},null,8,["title","disabled"])]),_:1})],2)])])}}};export{te as default};
