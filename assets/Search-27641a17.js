import{p as M,B as X,u as Y,f as G,g as H,s as v,X as K,o as Q,y as j,r as k,a as r,c as d,x as p,b as t,d as _,t as h,e as U,l as b,n as y,C as L,F as q,j as A,k as w,Y as W,D as Z,J as x,E as ee}from"./index-e698aeb1.js";import{_ as te}from"./WameedSideBarFilter-0eabdb66.js";const se={class:"products-conent"},ae={class:"products-conent-tabs-title"},ne={class:"products-conent-list"},oe={class:"products-conent-list-header"},re={class:"products-conent-list-title"},le={class:"d-flex align-items-center"},ce={key:0,class:"products-conent-list-header-view"},ie={key:0},ue={key:1},de={key:1,class:"search"},ge={class:"search-no-data"},me={class:"search-no-data-content"},ve={class:"search-no-data-content-title"},pe=t("p",{class:"search-no-data-content-subtitle"},"--------------------",-1),fe={__name:"Search",setup(_e){const $=M(),i=X();Y();const F=G(),l=H(),g=v("vertical"),P=v([]),u=v([]),m=v(!1),B=v(!1),c=v(!0),s=v({filters:{},search_term:null,item_group:null,sort_by:"desc",order_by:"name",page:1,page_length:9}),D=e=>{g.value=e,c.value=!0,setTimeout(()=>{c.value=!1},1e3)},N=(e,a)=>{const{[e]:f,...o}=a;return o},S=()=>{c.value=!0,l.query.keyword&&(s.value.search_term=l.query.keyword),l.query&&!B.value&&(l.query.item_group&&(s.value.item_group=l.query.item_group),s.value.filters={...s.value.filters,...N("item_group",l.query)}),i.loadProducts(s.value).then(()=>{u.value=i.getProducts.content,c.value=!1,u.value&&R()})},O=e=>typeof e=="object"&&e!==null&&!Array.isArray(e),V=e=>{m.value=!1,B.value=!0,c.value=!0;var a=Object.keys(e);for(let f=0;f<a.length;f++){const o=a[f];o=="group"?s.value.item_group=e[o]?e[o].id:null:O(e[o])?s.value.filters[o]=e[o].id:s.value.filters[o]=e[o]}s.value.page=1,F.push({name:"search",params:{lang:j.global.locale.value},query:Object.assign({},l.query,{item_group:s.value.item_group,...s.value.filters})}),setTimeout(()=>{S()},1e3)},I=e=>{s.value.page=s.value.page+1,i.loadProducts(s.value).then(()=>{u.value.push(...i.getProducts.content)})},R=()=>{const e={filters:{},search_term:null,item_group:null,sort_by:"desc",order_by:"name",page:1,page_length:8};$.shimmerLoadingStart(),i.loadSuggestedProducts(e).then(()=>{P.value=i.getSuggestedProducts.content,setTimeout(()=>{$.shimmerLoadingFinish()},2e3)})};return K(()=>[l.query.keyword],()=>{l.query.keyword&&S()},{immediate:!0,deep:!0}),Q(()=>{l.query.keyword||F.push({name:"home",params:{lang:j.global.locale.value}}),S()}),(e,a)=>{var T;const f=k("back-icon"),o=k("filter-icon"),z=k("grid-arrangement-icon"),E=k("vertical-arrangement-icon"),J=k("no-data-icon");return r(),d(q,null,[u.value.length>0||c.value?(r(),d("main",{key:0,class:p(["products",m.value?"position-static":""])},[t("div",se,[t("div",{class:p(["products-conent-tabs",m.value?"open":""])},[t("div",{class:"back-btn",onClick:a[0]||(a[0]=n=>m.value=!m.value)},[_(f)]),t("h1",ae,h(e.$t("common.Filter items")),1),_(te,{onChangeFilter:V})],2),t("div",ne,[t("div",oe,[t("h1",re,[U(h(e.$t("common.Research results"))+" ",1),t("span",null,"( "+h(((T=b(i).getProducts)==null?void 0:T.total)??0)+" "+h(e.$t("common.product"))+")",1)]),t("div",le,[t("div",{class:"products-conent-list-header-filter",onClick:a[1]||(a[1]=n=>m.value=!m.value)},[_(o)]),u.value.length>0?(r(),d("div",ce,[t("div",{class:p(["products-conent-list-header-view-item",g.value=="grid"?"active":""]),onClick:a[2]||(a[2]=n=>D("grid"))},[_(z,{class:"grid-arrangement-icon"}),t("p",null,h(e.$t("common.grid arrangement")),1)],2),t("div",{class:p(["products-conent-list-header-view-item",g.value=="vertical"?"active":""]),onClick:a[3]||(a[3]=n=>D("vertical"))},[_(E,{class:"vertical-arrangement-icon"}),t("p",null,h(e.$t("common.vertical arrangement")),1)],2)])):y("",!0)])]),u.value.length>0&&!c.value?(r(),d("div",ie,[t("div",{class:"products-conent-list-body",style:L(g.value=="grid"?"grid-template-columns: auto":"")},[(r(!0),d(q,null,A(u.value,(n,C)=>(r(),w(Z,{key:C,id:n.id,name:n.name,price:n.price,oldPrice:n.old_price,discount:n.discount_percentage,image:n.images,rate:n.rating,itemCode:n.item_code,class:p(g.value=="grid"?"grid-arrangement":"")},null,8,["id","name","price","oldPrice","discount","image","rate","itemCode","class"]))),128))],4),s.value.page<b(i).getProducts.last_page?(r(),w(b(x),{key:0,title:e.$t("common.Show more"),type:"button",prependIcon:"arrow-left-icon",class:p(b($).getBtnLoading?"suggested-products-content-btn is-loading":"suggested-products-content-btn"),onOnClick:a[4]||(a[4]=n=>I())},null,8,["title","class"])):y("",!0)])):y("",!0),c.value?(r(),d("div",ue,[t("div",{class:"products-conent-list-body",style:L(g.value=="grid"?"grid-template-columns: auto":"")},[(r(),d(q,null,A(8,(n,C)=>_(b(ee),{"is-loading":!0,key:C,class:p(g.value=="grid"?"grid-arrangement":"")},null,8,["class"])),64))],4)])):y("",!0)])])],2)):y("",!0),u.value.length<1&&!c.value?(r(),d("main",de,[t("div",ge,[t("div",me,[_(J,{class:"search-no-data-content-icon"}),t("h1",ve,h(e.$t("common.Sorry, there are no items")),1),pe])]),P.value&&P.value.length?(r(),w(W,{key:0,sectionTitle:e.$t("common.Suggested products"),data:P.value},null,8,["sectionTitle","data"])):y("",!0)])):y("",!0)],64)}}};export{fe as default};
